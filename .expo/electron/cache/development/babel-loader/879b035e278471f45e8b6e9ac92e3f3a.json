{"ast":null,"code":"var _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar useScanner = function useScanner(_ref) {\n  var onScan = _ref.onScan;\n  var buffer = '';\n\n  var handleKeypress = function handleKeypress(ev) {\n    if (buffer.length === 0 && ev.key !== '[') {\n      return;\n    }\n\n    if (ev.key === '[') {\n      buffer = '';\n    }\n\n    alert(ev.key);\n    buffer += ev.key;\n\n    if (ev.key === 'Enter') {\n      var barcode = buffer.substring(1, buffer.length - 5);\n      onScan(barcode);\n      buffer = '';\n    }\n  };\n\n  _react.default.useEffect(function () {\n    document.addEventListener('keypress', handleKeypress);\n    return function () {\n      document.removeEventListener('keypress', handleKeypress);\n    };\n  }, []);\n\n  return null;\n};\n\nvar _default = useScanner;\nexports.default = _default;","map":{"version":3,"sources":["/Users/estebanjoaquin/src/examples/with-electron/hook/useScanner.js"],"names":["useScanner","onScan","buffer","handleKeypress","ev","alert","barcode","React","document"],"mappings":";;;;;;;AAAA;;AAEA,IAAMA,UAAU,GAAVA,SAAAA,UAAAA,CAAa,IAAbA,EAA6B;AAAbC,MAAAA,MAAa,GAAA,IAAA,CAAbA,MAAAA;AAClB,MAAIC,MAAM,GAAV,EAAA;;AAEA,MAAMC,cAAc,GAAdA,SAAAA,cAAAA,CAAiB,EAAjBA,EAAyB;AAE3B,QAAID,MAAM,CAANA,MAAAA,KAAAA,CAAAA,IAAuBE,EAAE,CAAFA,GAAAA,KAA3B,GAAA,EAA2C;AACvC;AAGJ;;AAAA,QAAIA,EAAE,CAAFA,GAAAA,KAAJ,GAAA,EAAoB;AAChBF,MAAAA,MAAM,GAANA,EAAAA;AAEZG;;AAAAA,IAAAA,KAAK,CAACD,EAAE,CAARC,GAAK,CAALA;AACQH,IAAAA,MAAM,IAAIE,EAAE,CAAZF,GAAAA;;AAEA,QAAIE,EAAE,CAAFA,GAAAA,KAAJ,OAAA,EAAwB;AAEpB,UAAME,OAAO,GAAGJ,MAAM,CAANA,SAAAA,CAAAA,CAAAA,EAAoBA,MAAM,CAANA,MAAAA,GAApC,CAAgBA,CAAhB;AACAD,MAAAA,MAAM,CAANA,OAAM,CAANA;AACAC,MAAAA,MAAM,GAANA,EAAAA;AAEP;AAlBD,GAAA;;AAoBAK,iBAAAA,SAAAA,CAAgB,YAAM;AAClBC,IAAAA,QAAQ,CAARA,gBAAAA,CAAAA,UAAAA,EAAAA,cAAAA;AACA,WAAO,YAAM;AACTA,MAAAA,QAAQ,CAARA,mBAAAA,CAAAA,UAAAA,EAAAA,cAAAA;AADJ,KAAA;AAFJD,GAAAA,EAAAA,EAAAA;;AAOA,SAAA,IAAA;AA9BJ,CAAA;;eAiCA,U","sourcesContent":["import React from 'react'\n\nconst useScanner = ({ onScan }) => {\n    let buffer = ''\n\n    const handleKeypress = (ev) => {\n        \n        if (buffer.length === 0 && ev.key !== '[') {\n            return\n        }\n        \n        if (ev.key === '[') {\n            buffer = ''\n        }\nalert(ev.key)\n        buffer += ev.key\n\n        if (ev.key === 'Enter') {\n            //alert(buffer.substring(1, buffer.length - 5))\n            const barcode = buffer.substring(1, buffer.length - 5)\n            onScan(barcode)\n            buffer = ''\n        }\n    }\n\n    React.useEffect(() => {\n        document.addEventListener('keypress', handleKeypress)\n        return () => {\n            document.removeEventListener('keypress', handleKeypress)\n        }\n    }, [])\n\n    return null\n}\n\nexport default useScanner"]},"metadata":{},"sourceType":"script"}