{"ast":null,"code":"var _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _toConsumableArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/toConsumableArray\"));\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _Alert = _interopRequireDefault(require(\"react-native-web/dist/exports/Alert\"));\n\nvar _component = require(\"../../component\");\n\nvar _styles = _interopRequireDefault(require(\"./styles\"));\n\nvar _electron = require(\"electron\");\n\nvar _hook = require(\"../../hook\");\n\nvar _jsxRuntime = require(\"react/jsx-runtime\");\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    enumerableOnly && (symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    })), keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = null != arguments[i] ? arguments[i] : {};\n    i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {\n      (0, _defineProperty2.default)(target, key, source[key]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {\n      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n    });\n  }\n\n  return target;\n}\n\nvar inventoryMock = [{\n  id: 1,\n  productId: 4,\n  barcode: '111',\n  description: 'CEPILLO',\n  price: 20\n}, {\n  id: 2,\n  productId: 5,\n  barcode: '222',\n  description: 'JABON',\n  price: 40\n}];\n\nvar PDV = function PDV() {\n  var _React$useState = _react.default.useState([]),\n      _React$useState2 = (0, _slicedToArray2.default)(_React$useState, 2),\n      cartItems = _React$useState2[0],\n      setCartItems = _React$useState2[1];\n\n  (0, _hook.useHeaderTitle)(\"Punto de venta\");\n  (0, _hook.useBackButton)();\n  (0, _hook.useScanner)(function (barcode) {\n    var scannedProduct = inventoryMock.find(function (item) {\n      return item.barcode === barcode;\n    });\n\n    if (!scannedProduct) {\n      alert(barcode + ' no encontrado');\n    } else {\n      updateCart(scannedProduct);\n    }\n  });\n\n  var updateCart = function updateCart(scannedProduct) {\n    var existingItem = cartItems.find(function (item) {\n      return item.productId === scannedProduct.productId;\n    });\n\n    if (existingItem) {\n      setCartItems(cartItems.map(function (item) {\n        return item.productId === scannedProduct.productId ? _objectSpread(_objectSpread({}, item), {}, {\n          quantity: item.quantity + 1\n        }) : item;\n      }));\n    } else {\n      setCartItems([].concat((0, _toConsumableArray2.default)(cartItems), [_objectSpread({\n        id: cartItems.length + 1,\n        quantity: 1\n      }, scannedProduct)]));\n    }\n  };\n\n  var calculateTotal = function calculateTotal() {\n    return cartItems.reduce(function (carry, value) {\n      return carry + value.price * value.quantity;\n    }, 0);\n  };\n\n  var handleDelete = function handleDelete(item) {\n    return function () {\n      if (item.quantity === 1) {\n        setCartItems(cartItems.filter(function (cartItem) {\n          return cartItem.productId !== item.productId;\n        }));\n        return;\n      }\n\n      setCartItems(cartItems.map(function (cartItem) {\n        return cartItem.productId === item.productId ? _objectSpread(_objectSpread({}, cartItem), {}, {\n          quantity: cartItem.quantity - 1\n        }) : cartItem;\n      }));\n    };\n  };\n\n  var handleFinish = function handleFinish() {\n    setCartItems([]);\n  };\n\n  return (0, _jsxRuntime.jsxs)(_component.Container, {\n    flex: true,\n    spaceBetween: true,\n    children: [(0, _jsxRuntime.jsx)(_component.Container, {\n      row: true,\n      spaceBetween: true,\n      padded: true,\n      children: (0, _jsxRuntime.jsxs)(_component.Container, {\n        fullWidth: true,\n        children: [!cartItems.length && (0, _jsxRuntime.jsx)(_component.Text.Body, {\n          children: \"Comience a escanear...\"\n        }), cartItems.map(function (item) {\n          return (0, _jsxRuntime.jsxs)(_component.Container, {\n            flex: true,\n            row: true,\n            spaceBetween: true,\n            children: [(0, _jsxRuntime.jsxs)(_component.Container, {\n              row: true,\n              alignCenter: true,\n              children: [(0, _jsxRuntime.jsx)(_component.Text.TitleH1, {\n                children: item.quantity\n              }), (0, _jsxRuntime.jsx)(_component.Spacer.Small, {}), (0, _jsxRuntime.jsx)(_component.Container, {\n                alignCenter: true,\n                justifyCenter: true,\n                style: {\n                  width: 4,\n                  height: 4,\n                  backgroundColor: 'gold',\n                  borderRadius: 24\n                }\n              }), (0, _jsxRuntime.jsx)(_component.Spacer.Small, {}), (0, _jsxRuntime.jsx)(_component.Text.TitleH1, {\n                children: item.description\n              })]\n            }), (0, _jsxRuntime.jsx)(_component.Container, {\n              children: (0, _jsxRuntime.jsxs)(_component.Text.TitleH1, {\n                children: [item.price, \" ARS\"]\n              })\n            }), (0, _jsxRuntime.jsxs)(_component.Container, {\n              row: true,\n              alignCenter: true,\n              children: [(0, _jsxRuntime.jsxs)(_component.Text.TitleH1, {\n                children: [item.price * item.quantity, \" ARS\"]\n              }), (0, _jsxRuntime.jsx)(_component.Spacer.Medium, {}), (0, _jsxRuntime.jsx)(_component.Container, {\n                onPress: handleDelete(item),\n                children: (0, _jsxRuntime.jsx)(_component.Text.TitleH3, {\n                  children: \"Quitar\"\n                })\n              })]\n            })]\n          });\n        })]\n      })\n    }), (0, _jsxRuntime.jsxs)(_component.Container, {\n      row: true,\n      alignEnd: true,\n      spaceBetween: true,\n      padded: true,\n      children: [(0, _jsxRuntime.jsxs)(_component.Container, {\n        children: [(0, _jsxRuntime.jsx)(_component.Text.Small, {\n          children: \"TOTAL@\"\n        }), (0, _jsxRuntime.jsxs)(_component.Text.TitleH1, {\n          children: [calculateTotal(), \" ARS\"]\n        })]\n      }), (0, _jsxRuntime.jsx)(_component.Container, {\n        onPress: handleFinish,\n        children: (0, _jsxRuntime.jsx)(_component.Text.TitleH1, {\n          children: \"Finalizar\"\n        })\n      })]\n    })]\n  });\n};\n\nvar _default = PDV;\nexports.default = _default;","map":{"version":3,"sources":["/Users/estebanjoaquin/src/examples/with-electron/views/PDV/index.js"],"names":["inventoryMock","id","productId","barcode","description","price","PDV","cartItems","setCartItems","React","useHeaderTitle","useBackButton","useScanner","scannedProduct","item","alert","updateCart","existingItem","quantity","calculateTotal","carry","value","handleDelete","cartItem","handleFinish","width","height","backgroundColor","borderRadius"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { Alert } from 'react-native'\nimport { Container, Text, Spacer } from '../../component'\nimport styles from './styles'\nimport { dialog } from 'electron'\nimport { useBackButton, useScanner, useHeaderTitle } from '../../hook'\n\nconst inventoryMock = [{\n    id: 1,\n    productId: 4,\n    barcode: '111',\n    description: 'CEPILLO',\n    price: 20,\n}, {\n    id: 2,\n    productId: 5,\n    barcode: '222',\n    description: 'JABON',\n    price: 40,\n}]\n\nconst PDV = () => {\n    const [cartItems, setCartItems] = React.useState([])\n\n    useHeaderTitle(\"Punto de venta\")\n    useBackButton()\n    useScanner((barcode) => {\n        const scannedProduct = inventoryMock.find(item => (\n            item.barcode === barcode\n        ))\n        if (!scannedProduct) {\n            alert(barcode + ' no encontrado')\n        }\n        else {\n            updateCart(scannedProduct)\n        }\n    })\n\n    const updateCart = (scannedProduct) => {\n        const existingItem = cartItems.find(item => (\n            item.productId === scannedProduct.productId\n        ))\n        if (existingItem) {\n            setCartItems(cartItems.map(item => (\n                item.productId === scannedProduct.productId ?\n                    { ...item, quantity: item.quantity + 1 } : item\n            )))\n        }\n        else {\n            setCartItems([\n                ...cartItems,\n                {\n                    id: cartItems.length + 1,\n                    quantity: 1,\n                    ...scannedProduct,\n                }\n            ])\n        }\n    }\n\n    const calculateTotal = () => {\n        return cartItems.reduce((carry, value) => {\n            return carry + (value.price * value.quantity)\n        }, 0)\n    }\n\n    const handleDelete = (item) => () => {\n        if (item.quantity === 1) {\n            setCartItems(cartItems.filter(cartItem => (\n                cartItem.productId !== item.productId\n            )))\n            return\n        }\n\n        setCartItems(\n            cartItems.map(cartItem => (\n                cartItem.productId === item.productId ?\n                    { ...cartItem, quantity: cartItem.quantity - 1 } : cartItem\n            ))\n        )\n    }\n\n    const handleFinish = () => {\n        setCartItems([])\n\n    }\n\n    return (\n        <Container flex spaceBetween>\n            <Container row spaceBetween padded>\n                <Container fullWidth>\n                    {!cartItems.length &&\n                        <Text.Body>Comience a escanear...</Text.Body>}\n                    {cartItems.map(item => (\n                        <Container flex row spaceBetween>\n                            <Container row alignCenter>\n                                <Text.TitleH1>{item.quantity}</Text.TitleH1>\n                                <Spacer.Small />\n                                <Container alignCenter justifyCenter style={{\n                                    width: 4,\n                                    height: 4,\n                                    backgroundColor: 'gold',\n                                    borderRadius: 24,\n                                }} />\n                                <Spacer.Small />\n                                <Text.TitleH1>\n                                    {item.description}\n                                </Text.TitleH1>\n                            </Container>\n                            <Container>\n                                <Text.TitleH1>\n                                    {item.price} ARS\n                                    </Text.TitleH1>\n                            </Container>\n                            <Container row alignCenter>\n                                <Text.TitleH1>\n                                    {item.price * item.quantity} ARS\n                            </Text.TitleH1>\n                                <Spacer.Medium />\n                                <Container onPress={handleDelete(item)}>\n                                    <Text.TitleH3>Quitar</Text.TitleH3>\n                                </Container>\n                            </Container>\n                        </Container>\n                    ))}\n                </Container>\n\n            </Container>\n            <Container row alignEnd spaceBetween padded>\n                <Container>\n                    <Text.Small>TOTAL@</Text.Small>\n                    <Text.TitleH1>{calculateTotal()} ARS</Text.TitleH1>\n                </Container>\n                <Container onPress={handleFinish}>\n                    <Text.TitleH1>Finalizar</Text.TitleH1>\n                </Container>\n            </Container>\n        </Container>\n    );\n}\n\nexport default PDV\n"]},"metadata":{},"sourceType":"script"}