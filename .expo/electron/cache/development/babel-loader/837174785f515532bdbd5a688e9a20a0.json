{"ast":null,"code":"var _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar useScanner = function useScanner(onScan) {\n  var handleKeypress = function handleKeypress(ev) {\n    if (buffer.length === 0 && ev.key !== '[') {\n      return;\n    }\n\n    if (ev.key === '[') {\n      buffer = '';\n    }\n\n    buffer += ev.key;\n\n    if (ev.key === 'Enter') {\n      var barcode = buffer.substring(1, buffer.length - 5);\n      onScan(barcode);\n      buffer = '';\n    }\n  };\n\n  _react.default.useEffect(function () {\n    document.addEventListener('keypress', handleKeypress);\n    return function () {\n      alert(222);\n      document.removeEventListener('keypress', handleKeypress);\n    };\n  }, []);\n\n  return null;\n};\n\nvar _default = useScanner;\nexports.default = _default;","map":{"version":3,"sources":["/Users/estebanjoaquin/src/examples/with-electron/hook/useScanner.js"],"names":["useScanner","handleKeypress","buffer","ev","barcode","onScan","React","document","alert"],"mappings":";;;;;;;AAAA;;AAEA,IAAMA,UAAU,GAAVA,SAAAA,UAAAA,CAAa,MAAbA,EAAyB;AAC3B,MAAMC,cAAc,GAAdA,SAAAA,cAAAA,CAAiB,EAAjBA,EAAyB;AAC3B,QAAIC,MAAM,CAANA,MAAAA,KAAAA,CAAAA,IAAuBC,EAAE,CAAFA,GAAAA,KAA3B,GAAA,EAA2C;AACvC;AAEJ;;AAAA,QAAIA,EAAE,CAAFA,GAAAA,KAAJ,GAAA,EAAoB;AAChBD,MAAAA,MAAM,GAANA,EAAAA;AAGJA;;AAAAA,IAAAA,MAAM,IAAIC,EAAE,CAAZD,GAAAA;;AAEA,QAAIC,EAAE,CAAFA,GAAAA,KAAJ,OAAA,EAAwB;AAEpB,UAAMC,OAAO,GAAGF,MAAM,CAANA,SAAAA,CAAAA,CAAAA,EAAoBA,MAAM,CAANA,MAAAA,GAApC,CAAgBA,CAAhB;AACAG,MAAAA,MAAM,CAANA,OAAM,CAANA;AACAH,MAAAA,MAAM,GAANA,EAAAA;AAEP;AAhBD,GAAA;;AAkBAI,iBAAAA,SAAAA,CAAgB,YAAM;AAElBC,IAAAA,QAAQ,CAARA,gBAAAA,CAAAA,UAAAA,EAAAA,cAAAA;AACA,WAAO,YAAM;AACTC,MAAAA,KAAK,CAALA,GAAK,CAALA;AACAD,MAAAA,QAAQ,CAARA,mBAAAA,CAAAA,UAAAA,EAAAA,cAAAA;AAFJ,KAAA;AAHJD,GAAAA,EAAAA,EAAAA;;AASA,SAAA,IAAA;AA5BJ,CAAA;;eA+BA,U","sourcesContent":["import React from 'react'\n\nconst useScanner = (onScan) => {\n    const handleKeypress = (ev) => {\n        if (buffer.length === 0 && ev.key !== '[') {\n            return\n        }\n        if (ev.key === '[') {\n            buffer = ''\n        }\n\n        buffer += ev.key\n\n        if (ev.key === 'Enter') {\n            //alert(buffer.substring(1, buffer.length - 5))\n            const barcode = buffer.substring(1, buffer.length - 5)\n            onScan(barcode)\n            buffer = ''\n        }\n    }\n\n    React.useEffect(() => {\n        \n        document.addEventListener('keypress', handleKeypress)\n        return () => {\n            alert(222)\n            document.removeEventListener('keypress', handleKeypress)\n        }\n    }, [])\n\n    return null\n}\n\nexport default useScanner"]},"metadata":{},"sourceType":"script"}