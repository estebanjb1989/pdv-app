{"ast":null,"code":"var _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _toConsumableArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/toConsumableArray\"));\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _component = require(\"../../component\");\n\nvar _styles = _interopRequireDefault(require(\"./styles\"));\n\nvar _jsxRuntime = require(\"react/jsx-runtime\");\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    enumerableOnly && (symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    })), keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = null != arguments[i] ? arguments[i] : {};\n    i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {\n      (0, _defineProperty2.default)(target, key, source[key]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {\n      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n    });\n  }\n\n  return target;\n}\n\nvar inventoryMock = [{\n  id: 1,\n  productId: 4,\n  barcode: '111',\n  description: 'CEPILLO',\n  price: 20\n}, {\n  id: 2,\n  productId: 5,\n  barcode: '222',\n  description: 'JABON',\n  price: 40\n}];\n\nvar PDV = function PDV() {\n  var _React$useState = _react.default.useState([]),\n      _React$useState2 = (0, _slicedToArray2.default)(_React$useState, 2),\n      cartItems = _React$useState2[0],\n      setCartItems = _React$useState2[1];\n\n  var buffer = '';\n\n  var updateCart = function updateCart(scannedProduct) {\n    var existingItem = cartItems.find(function (item) {\n      return item.productId === scannedProduct.productId;\n    });\n\n    if (existingItem) {\n      setCartItems(cartItems.map(function (item) {\n        return item.productId === scannedProduct.productId ? _objectSpread(_objectSpread({}, item), {}, {\n          quantity: item.quantity + 1\n        }) : item;\n      }));\n    } else {\n      setCartItems([].concat((0, _toConsumableArray2.default)(cartItems), [_objectSpread({\n        id: cartItems.length + 1,\n        quantity: 1\n      }, scannedProduct)]));\n    }\n  };\n\n  var handleKeypress = function handleKeypress(ev) {\n    if (buffer.length === 0 && ev.key !== '[') {\n      return;\n    }\n\n    if (ev.key === '[') {\n      buffer = '';\n    }\n\n    buffer += ev.key;\n\n    if (ev.key === 'Enter') {\n      var barcode = buffer.substring(1, buffer.length - 5);\n      var scannedProduct = inventoryMock.find(function (item) {\n        return item.barcode === barcode;\n      });\n\n      if (!scannedProduct) {\n        alert('Producto no encontrado');\n      } else {\n        updateCart(scannedProduct);\n      }\n\n      buffer = '';\n    }\n  };\n\n  _react.default.useEffect(function () {\n    document.addEventListener('keypress', handleKeypress);\n    return function () {\n      document.removeEventListener('keypress', handleKeypress);\n    };\n  });\n\n  var calculateTotal = function calculateTotal() {\n    return cartItems.reduce(function (carry, value) {\n      return carry + value.price * value.quantity;\n    }, 0);\n  };\n\n  var handleDelete = function handleDelete(item) {\n    return function () {\n      if (item.quantity === 1) {\n        setCartItems(cartItems.filter(function (cartItem) {\n          return cartItem.productId !== item.productId;\n        }));\n        return;\n      }\n\n      setCartItems(cartItems.map(function (cartItem) {\n        return cartItem.productId === item.productId ? _objectSpread(_objectSpread({}, cartItem), {}, {\n          quantity: cartItem.quantity - 1\n        }) : cartItem;\n      }));\n    };\n  };\n\n  var handleFinish = function handleFinish() {\n    setCartItems([]);\n  };\n\n  return (0, _jsxRuntime.jsxs)(_component.Container, {\n    flex: true,\n    spaceBetween: true,\n    children: [(0, _jsxRuntime.jsx)(_component.Container, {\n      row: true,\n      spaceBetween: true,\n      padded: true,\n      children: (0, _jsxRuntime.jsxs)(_component.Container, {\n        children: [!cartItems.length && (0, _jsxRuntime.jsx)(_component.Text.TitleH1, {\n          children: \"Comience a escanear...\"\n        }), cartItems.map(function (item) {\n          return (0, _jsxRuntime.jsxs)(_component.Container, {\n            row: true,\n            style: {\n              width: '100%',\n              backgroundColor: 'yellow'\n            },\n            spaceBetween: true,\n            children: [(0, _jsxRuntime.jsxs)(_component.Container, {\n              row: true,\n              alignCenter: true,\n              children: [(0, _jsxRuntime.jsx)(_component.Text.TitleH1, {\n                children: item.quantity\n              }), (0, _jsxRuntime.jsx)(_component.Spacer.Small, {}), (0, _jsxRuntime.jsx)(_component.Container, {\n                alignCenter: true,\n                justifyCenter: true,\n                style: {\n                  width: 4,\n                  height: 4,\n                  backgroundColor: 'gold',\n                  borderRadius: 24\n                }\n              }), (0, _jsxRuntime.jsx)(_component.Spacer.Small, {}), (0, _jsxRuntime.jsx)(_component.Text.TitleH1, {\n                children: item.description\n              })]\n            }), (0, _jsxRuntime.jsxs)(_component.Container, {\n              row: true,\n              alignCenter: true,\n              children: [(0, _jsxRuntime.jsxs)(_component.Text.TitleH1, {\n                children: [item.price, \" ARS\"]\n              }), (0, _jsxRuntime.jsx)(_component.Spacer.Medium, {}), (0, _jsxRuntime.jsx)(_component.Container, {\n                onPress: handleDelete(item),\n                children: (0, _jsxRuntime.jsx)(_component.Text.TitleH3, {\n                  children: \"(-)\"\n                })\n              })]\n            })]\n          });\n        })]\n      })\n    }), (0, _jsxRuntime.jsxs)(_component.Container, {\n      row: true,\n      alignCenter: true,\n      spaceBetween: true,\n      padded: true,\n      children: [(0, _jsxRuntime.jsx)(_component.Container, {\n        children: (0, _jsxRuntime.jsxs)(_component.Text.TitleH1, {\n          children: [calculateTotal(), \" ARS\"]\n        })\n      }), (0, _jsxRuntime.jsx)(_component.Container, {\n        onPress: handleFinish,\n        children: (0, _jsxRuntime.jsx)(_component.Text.TitleH1, {\n          children: \"Finalizar\"\n        })\n      })]\n    })]\n  });\n};\n\nvar _default = PDV;\nexports.default = _default;","map":{"version":3,"sources":["/Users/estebanjoaquin/src/examples/with-electron/views/PDV/index.js"],"names":["inventoryMock","id","productId","barcode","description","price","PDV","cartItems","setCartItems","React","buffer","updateCart","existingItem","item","scannedProduct","quantity","handleKeypress","ev","alert","document","calculateTotal","carry","value","handleDelete","cartItem","handleFinish","width","backgroundColor","height","borderRadius"],"mappings":";;;;;;;;;;;;;AAAA;;AACA;;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAFA;;AAIA,IAAMA,aAAa,GAAG,CAAC;AACnBC,EAAAA,EAAE,EADiB,CAAA;AAEnBC,EAAAA,SAAS,EAFU,CAAA;AAGnBC,EAAAA,OAAO,EAHY,KAAA;AAInBC,EAAAA,WAAW,EAJQ,SAAA;AAKnBC,EAAAA,KAAK,EALa;AAAC,CAAD,EAMnB;AACCJ,EAAAA,EAAE,EADH,CAAA;AAECC,EAAAA,SAAS,EAFV,CAAA;AAGCC,EAAAA,OAAO,EAHR,KAAA;AAICC,EAAAA,WAAW,EAJZ,OAAA;AAKCC,EAAAA,KAAK,EAXT;AAMG,CANmB,CAAtB;;AAcA,IAAMC,GAAG,GAAHA,SAAAA,GAAAA,GAAY;AACd,MAAA,eAAA,GAAkCG,eAAAA,QAAAA,CAAlC,EAAkCA,CAAlC;AAAA,MAAA,gBAAA,GAAA,6BAAA,eAAA,EAAA,CAAA,CAAA;AAAA,MAAOF,SAAP,GAAA,gBAAA,CAAA,CAAA,CAAA;AAAA,MAAkBC,YAAlB,GAAA,gBAAA,CAAA,CAAA,CAAA;;AACA,MAAIE,MAAM,GAAV,EAAA;;AAEA,MAAMC,UAAU,GAAVA,SAAAA,UAAAA,CAAa,cAAbA,EAAiC;AACnC,QAAMC,YAAY,GAAGL,SAAS,CAATA,IAAAA,CAAe,UAAA,IAAA,EAAI;AAAA,aACpCM,IAAI,CAAJA,SAAAA,KAAmBC,cAAc,CADG,SAAA;AAAxC,KAAqBP,CAArB;;AAGA,QAAA,YAAA,EAAkB;AACdC,MAAAA,YAAY,CAACD,SAAS,CAATA,GAAAA,CAAc,UAAA,IAAA,EAAI;AAAA,eAC3BM,IAAI,CAAJA,SAAAA,KAAmBC,cAAc,CAAjCD,SAAAA,GAAAA,aAAAA,CAAAA,aAAAA,CAAAA,EAAAA,EAAAA,IAAAA,CAAAA,EAAAA,EAAAA,EAAAA;AACeE,UAAAA,QAAQ,EAAEF,IAAI,CAAJA,QAAAA,GADzBA;AAAAA,SAAAA,CAAAA,GAD2B,IAAA;AAA/BL,OAAaD,CAAD,CAAZC;AADJ,KAAA,MAMK;AACDA,MAAAA,YAAY,CAAA,GAAA,MAAA,CAAA,iCAAA,SAAA,CAAA,EAAA,CAAA,aAAA,CAAA;AAGJP,QAAAA,EAAE,EAAEM,SAAS,CAATA,MAAAA,GAHA,CAAA;AAIJQ,QAAAA,QAAQ,EAJJ;AAAA,OAAA,EAAZP,cAAY,CAAA,CAAA,CAAA,CAAZA;AASP;AApBD,GAAA;;AAsBA,MAAMQ,cAAc,GAAdA,SAAAA,cAAAA,CAAiB,EAAjBA,EAAyB;AAC3B,QAAIN,MAAM,CAANA,MAAAA,KAAAA,CAAAA,IAAuBO,EAAE,CAAFA,GAAAA,KAA3B,GAAA,EAA2C;AACvC;AAEJ;;AAAA,QAAIA,EAAE,CAAFA,GAAAA,KAAJ,GAAA,EAAoB;AAChBP,MAAAA,MAAM,GAANA,EAAAA;AAGJA;;AAAAA,IAAAA,MAAM,IAAIO,EAAE,CAAZP,GAAAA;;AAEA,QAAIO,EAAE,CAAFA,GAAAA,KAAJ,OAAA,EAAwB;AAEpB,UAAMd,OAAO,GAAGO,MAAM,CAANA,SAAAA,CAAAA,CAAAA,EAAoBA,MAAM,CAANA,MAAAA,GAApC,CAAgBA,CAAhB;AACA,UAAMI,cAAc,GAAGd,aAAa,CAAbA,IAAAA,CAAmB,UAAA,IAAA,EAAI;AAAA,eAC1Ca,IAAI,CAAJA,OAAAA,KAD0C,OAAA;AAA9C,OAAuBb,CAAvB;;AAGA,UAAI,CAAJ,cAAA,EAAqB;AACjBkB,QAAAA,KAAK,CAALA,wBAAK,CAALA;AADJ,OAAA,MAGK;AACDP,QAAAA,UAAU,CAAVA,cAAU,CAAVA;AAEJD;;AAAAA,MAAAA,MAAM,GAANA,EAAAA;AAEP;AAxBD,GAAA;;AA0BAD,iBAAAA,SAAAA,CAAgB,YAAM;AAClBU,IAAAA,QAAQ,CAARA,gBAAAA,CAAAA,UAAAA,EAAAA,cAAAA;AACA,WAAO,YAAM;AACTA,MAAAA,QAAQ,CAARA,mBAAAA,CAAAA,UAAAA,EAAAA,cAAAA;AADJ,KAAA;AAFJV,GAAAA;;AAOA,MAAMW,cAAc,GAAdA,SAAAA,cAAAA,GAAuB;AACzB,WAAOb,SAAS,CAATA,MAAAA,CAAiB,UAAA,KAAA,EAAA,KAAA,EAAkB;AACtC,aAAOc,KAAK,GAAIC,KAAK,CAALA,KAAAA,GAAcA,KAAK,CAAnC,QAAA;AADGf,KAAAA,EAAP,CAAOA,CAAP;AADJ,GAAA;;AAMA,MAAMgB,YAAY,GAAZA,SAAAA,YAAAA,CAAe,IAAfA,EAAe;AAAA,WAAU,YAAM;AACjC,UAAIV,IAAI,CAAJA,QAAAA,KAAJ,CAAA,EAAyB;AACrBL,QAAAA,YAAY,CAACD,SAAS,CAATA,MAAAA,CAAiB,UAAA,QAAA,EAAQ;AAAA,iBAClCiB,QAAQ,CAARA,SAAAA,KAAuBX,IAAI,CADO,SAAA;AAAtCL,SAAaD,CAAD,CAAZC;AAGA;AAGJA;;AAAAA,MAAAA,YAAY,CACRD,SAAS,CAATA,GAAAA,CAAc,UAAA,QAAA,EAAQ;AAAA,eAClBiB,QAAQ,CAARA,SAAAA,KAAuBX,IAAI,CAA3BW,SAAAA,GAAAA,aAAAA,CAAAA,aAAAA,CAAAA,EAAAA,EAAAA,QAAAA,CAAAA,EAAAA,EAAAA,EAAAA;AACmBT,UAAAA,QAAQ,EAAES,QAAQ,CAARA,QAAAA,GAD7BA;AAAAA,SAAAA,CAAAA,GADkB,QAAA;AAD1BhB,OACID,CADQ,CAAZC;AARiB,KAAA;AAArB,GAAA;;AAgBA,MAAMiB,YAAY,GAAZA,SAAAA,YAAAA,GAAqB;AACvBjB,IAAAA,YAAY,CAAZA,EAAY,CAAZA;AADJ,GAAA;;AAIA,SACI,sBAAA,oBAAA,EAAA;AAAW,IAAA,IAAI,EAAf,IAAA;AAAgB,IAAA,YAAY,EAA5B,IAAA;AAAA,IAAA,QAAA,EAAA,CACI,qBAAA,oBAAA,EAAA;AAAW,MAAA,GAAG,EAAd,IAAA;AAAe,MAAA,YAAY,EAA3B,IAAA;AAA4B,MAAA,MAAM,EAAlC,IAAA;AAAA,MAAA,QAAA,EACI,sBAAA,oBAAA,EAAA;AAAA,QAAA,QAAA,EAAA,CACK,CAACD,SAAS,CAAV,MAAA,IACG,qBAAA,gBAAA,OAAA,EAAA;AAAA,UAAA,QAAA,EAFR;AAEQ,SAAA,CAFR,EAGKA,SAAS,CAATA,GAAAA,CAAc,UAAA,IAAA,EAAI;AAAA,iBACf,sBAAA,oBAAA,EAAA;AAAW,YAAA,GAAG,EAAd,IAAA;AAAe,YAAA,KAAK,EAAE;AAClBmB,cAAAA,KAAK,EADa,MAAA;AAElBC,cAAAA,eAAe,EAFnB;AAAsB,aAAtB;AAGG,YAAA,YAAY,EAHf,IAAA;AAAA,YAAA,QAAA,EAAA,CAII,sBAAA,oBAAA,EAAA;AAAW,cAAA,GAAG,EAAd,IAAA;AAAe,cAAA,WAAW,EAA1B,IAAA;AAAA,cAAA,QAAA,EAAA,CACI,qBAAA,gBAAA,OAAA,EAAA;AAAA,gBAAA,QAAA,EAAed,IAAI,CADvB;AACI,eAAA,CADJ,EAEI,qBAAA,kBAAA,KAAA,EAFJ,EAEI,CAFJ,EAGI,qBAAA,oBAAA,EAAA;AAAW,gBAAA,WAAW,EAAtB,IAAA;AAAuB,gBAAA,aAAa,EAApC,IAAA;AAAqC,gBAAA,KAAK,EAAE;AACxCa,kBAAAA,KAAK,EADmC,CAAA;AAExCE,kBAAAA,MAAM,EAFkC,CAAA;AAGxCD,kBAAAA,eAAe,EAHyB,MAAA;AAIxCE,kBAAAA,YAAY,EAPpB;AAGgD;AAA5C,eAAA,CAHJ,EASI,qBAAA,kBAAA,KAAA,EATJ,EASI,CATJ,EAUI,qBAAA,gBAAA,OAAA,EAAA;AAAA,gBAAA,QAAA,EACKhB,IAAI,CAfjB;AAcQ,eAAA,CAVJ;AAAA,aAAA,CAJJ,EAkBI,sBAAA,oBAAA,EAAA;AAAW,cAAA,GAAG,EAAd,IAAA;AAAe,cAAA,WAAW,EAA1B,IAAA;AAAA,cAAA,QAAA,EAAA,CACI,sBAAA,gBAAA,OAAA,EAAA;AAAA,gBAAA,QAAA,EAAA,CACKA,IAAI,CADT,KAAA,EADJ,MACI;AAAA,eAAA,CADJ,EAII,qBAAA,kBAAA,MAAA,EAJJ,EAII,CAJJ,EAKI,qBAAA,oBAAA,EAAA;AAAW,gBAAA,OAAO,EAAEU,YAAY,CAAhC,IAAgC,CAAhC;AAAA,gBAAA,QAAA,EACI,qBAAA,gBAAA,OAAA,EAAA;AAAA,kBAAA,QAAA,EAzBG;AAyBH,iBAAA;AADJ,eAAA,CALJ;AAAA,aAAA,CAlBJ;AAAA,WAAA,CADe;AAL/B,SAKahB,CAHL;AAAA,OAAA;AADJ,KAAA,CADJ,EAsCI,sBAAA,oBAAA,EAAA;AAAW,MAAA,GAAG,EAAd,IAAA;AAAe,MAAA,WAAW,EAA1B,IAAA;AAA2B,MAAA,YAAY,EAAvC,IAAA;AAAwC,MAAA,MAAM,EAA9C,IAAA;AAAA,MAAA,QAAA,EAAA,CACI,qBAAA,oBAAA,EAAA;AAAA,QAAA,QAAA,EACI,sBAAA,gBAAA,OAAA,EAAA;AAAA,UAAA,QAAA,EAAA,CAAea,cAAf,EAAA,EAFR,MAEQ;AAAA,SAAA;AADJ,OAAA,CADJ,EAII,qBAAA,oBAAA,EAAA;AAAW,QAAA,OAAO,EAAlB,YAAA;AAAA,QAAA,QAAA,EACI,qBAAA,gBAAA,OAAA,EAAA;AAAA,UAAA,QAAA,EA5ChB;AA4CgB,SAAA;AADJ,OAAA,CAJJ;AAAA,KAAA,CAtCJ;AAAA,GAAA,CADJ;AArFJ,CAAA;;eAwIA,G","sourcesContent":["import React from 'react';\nimport { Container, Text, Spacer } from '../../component'\nimport styles from './styles'\n\nconst inventoryMock = [{\n    id: 1,\n    productId: 4,\n    barcode: '111',\n    description: 'CEPILLO',\n    price: 20,\n}, {\n    id: 2,\n    productId: 5,\n    barcode: '222',\n    description: 'JABON',\n    price: 40,\n}]\n\nconst PDV = () => {\n    const [cartItems, setCartItems] = React.useState([])\n    let buffer = ''\n\n    const updateCart = (scannedProduct) => {\n        const existingItem = cartItems.find(item => (\n            item.productId === scannedProduct.productId\n        ))\n        if (existingItem) {\n            setCartItems(cartItems.map(item => (\n                item.productId === scannedProduct.productId ?\n                    { ...item, quantity: item.quantity + 1 } : item\n            )))\n        }\n        else {\n            setCartItems([\n                ...cartItems,\n                {\n                    id: cartItems.length + 1,\n                    quantity: 1,\n                    ...scannedProduct,\n                }\n            ])\n        }\n    }\n\n    const handleKeypress = (ev) => {\n        if (buffer.length === 0 && ev.key !== '[') {\n            return\n        }\n        if (ev.key === '[') {\n            buffer = ''\n        }\n\n        buffer += ev.key\n\n        if (ev.key === 'Enter') {\n            //alert(buffer.substring(1, buffer.length - 5))\n            const barcode = buffer.substring(1, buffer.length - 5)\n            const scannedProduct = inventoryMock.find(item => (\n                item.barcode === barcode\n            ))\n            if (!scannedProduct) {\n                alert('Producto no encontrado')\n            }\n            else {\n                updateCart(scannedProduct)\n            }\n            buffer = ''\n        }\n    }\n\n    React.useEffect(() => {\n        document.addEventListener('keypress', handleKeypress)\n        return () => {\n            document.removeEventListener('keypress', handleKeypress)\n        }\n    })\n\n    const calculateTotal = () => {\n        return cartItems.reduce((carry, value) => {\n            return carry + (value.price * value.quantity)\n        }, 0)\n    }\n\n    const handleDelete = (item) => () => {\n        if (item.quantity === 1) {\n            setCartItems(cartItems.filter(cartItem => (\n                cartItem.productId !== item.productId\n            )))\n            return\n        }\n\n        setCartItems(\n            cartItems.map(cartItem => (\n                cartItem.productId === item.productId ?\n                    { ...cartItem, quantity: cartItem.quantity - 1 } : cartItem\n            ))\n        )\n    }\n\n    const handleFinish = () => {\n        setCartItems([])\n    }\n\n    return (\n        <Container flex spaceBetween>\n            <Container row spaceBetween padded>\n                <Container>\n                    {!cartItems.length &&\n                        <Text.TitleH1>Comience a escanear...</Text.TitleH1>}\n                    {cartItems.map(item => (\n                        <Container row style={{\n                            width: '100%',\n                            backgroundColor: 'yellow'\n                        }} spaceBetween>\n                            <Container row alignCenter>\n                                <Text.TitleH1>{item.quantity}</Text.TitleH1>\n                                <Spacer.Small />\n                                <Container alignCenter justifyCenter style={{\n                                    width: 4,\n                                    height: 4,\n                                    backgroundColor: 'gold',\n                                    borderRadius: 24,\n                                }} />\n                                <Spacer.Small />\n                                <Text.TitleH1>\n                                    {item.description}\n                                </Text.TitleH1>\n                            </Container>\n                            <Container row alignCenter>\n                                <Text.TitleH1>\n                                    {item.price} ARS\n                            </Text.TitleH1>\n                                <Spacer.Medium />\n                                <Container onPress={handleDelete(item)}>\n                                    <Text.TitleH3>(-)</Text.TitleH3>\n                                </Container>\n                            </Container>\n                        </Container>\n                    ))}\n                </Container>\n\n            </Container>\n            <Container row alignCenter spaceBetween padded>\n                <Container>\n                    <Text.TitleH1>{calculateTotal()} ARS</Text.TitleH1>\n                </Container>\n                <Container onPress={handleFinish}>\n                    <Text.TitleH1>Finalizar</Text.TitleH1>\n                </Container>\n            </Container>\n        </Container>\n    );\n}\n\nexport default PDV\n"]},"metadata":{},"sourceType":"script"}