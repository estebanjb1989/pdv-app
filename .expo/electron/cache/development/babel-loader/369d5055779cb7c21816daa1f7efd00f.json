{"ast":null,"code":"var _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _toConsumableArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/toConsumableArray\"));\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _FlatList = _interopRequireDefault(require(\"react-native-web/dist/exports/FlatList\"));\n\nvar _component = require(\"../../component\");\n\nvar _styles = _interopRequireDefault(require(\"./styles\"));\n\nvar _electron = require(\"electron\");\n\nvar _hook = require(\"../../hook\");\n\nvar _jsxRuntime = require(\"react/jsx-runtime\");\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    enumerableOnly && (symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    })), keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = null != arguments[i] ? arguments[i] : {};\n    i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {\n      (0, _defineProperty2.default)(target, key, source[key]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {\n      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n    });\n  }\n\n  return target;\n}\n\nvar inventoryMock = [{\n  id: 1,\n  productId: 4,\n  barcode: '111',\n  description: 'CEPILLO',\n  price: 20\n}, {\n  id: 2,\n  productId: 5,\n  barcode: '222',\n  description: 'JABON',\n  price: 40\n}];\n\nvar PDV = function PDV() {\n  var _React$useState = _react.default.useState([]),\n      _React$useState2 = (0, _slicedToArray2.default)(_React$useState, 2),\n      cartItems = _React$useState2[0],\n      setCartItems = _React$useState2[1];\n\n  var _React$useState3 = _react.default.useState(null),\n      _React$useState4 = (0, _slicedToArray2.default)(_React$useState3, 2),\n      scanned = _React$useState4[0],\n      setScanned = _React$useState4[1];\n\n  (0, _hook.useHeaderTitle)(\"Punto de venta\");\n  (0, _hook.useBackButton)();\n  (0, _hook.useScanner)((0, _react.useCallback)(function (barcode) {\n    var item = inventoryMock.find(function (item) {\n      return item.barcode === barcode;\n    });\n\n    if (!item) {\n      alert(barcode + ' no encontrado');\n    } else {\n      setScanned(_objectSpread(_objectSpread({}, item), {}, {\n        scannedAt: Date.now()\n      }));\n    }\n  }, [setScanned]));\n\n  _react.default.useEffect(function () {\n    if (!scanned) {\n      return;\n    }\n\n    updateCart(scanned);\n  }, [scanned]);\n\n  var updateCart = function updateCart(scannedProduct) {\n    var existingItem = cartItems.find(function (item) {\n      return item.productId === scannedProduct.productId;\n    });\n\n    if (existingItem) {\n      setCartItems(cartItems.map(function (item) {\n        return item.productId === scannedProduct.productId ? _objectSpread(_objectSpread({}, item), {}, {\n          quantity: item.quantity + 1\n        }) : item;\n      }));\n    } else {\n      setCartItems([].concat((0, _toConsumableArray2.default)(cartItems), [_objectSpread({\n        id: cartItems.length + 1,\n        quantity: 1\n      }, scannedProduct)]));\n    }\n  };\n\n  var calculateTotal = function calculateTotal() {\n    return cartItems.reduce(function (carry, value) {\n      return carry + value.price * value.quantity;\n    }, 0);\n  };\n\n  var handleDelete = function handleDelete(item) {\n    return function () {\n      if (item.quantity === 1) {\n        setCartItems(cartItems.filter(function (cartItem) {\n          return cartItem.productId !== item.productId;\n        }));\n        return;\n      }\n\n      setCartItems(cartItems.map(function (cartItem) {\n        return cartItem.productId === item.productId ? _objectSpread(_objectSpread({}, cartItem), {}, {\n          quantity: cartItem.quantity - 1\n        }) : cartItem;\n      }));\n    };\n  };\n\n  var handleFinish = function handleFinish() {\n    setCartItems([]);\n  };\n\n  return (0, _jsxRuntime.jsxs)(_component.Container, {\n    flex: true,\n    spaceBetween: true,\n    children: [(0, _jsxRuntime.jsx)(_component.Container, {\n      row: true,\n      spaceBetween: true,\n      padded: true,\n      children: (0, _jsxRuntime.jsx)(_component.Container, {\n        fullWidth: true,\n        children: (0, _jsxRuntime.jsx)(_FlatList.default, {\n          keyExtractor: function keyExtractor(item) {\n            return item.id;\n          },\n          data: cartItems,\n          ListHeaderComponent: (0, _jsxRuntime.jsxs)(_component.Container, {\n            children: [(0, _jsxRuntime.jsxs)(_component.Container, {\n              row: true,\n              spaceBetween: true,\n              children: [(0, _jsxRuntime.jsx)(_component.Container, {\n                style: {\n                  width: '15%'\n                },\n                children: (0, _jsxRuntime.jsx)(_component.Text.Small, {\n                  children: \"CANTIDAD\"\n                })\n              }), (0, _jsxRuntime.jsx)(_component.Container, {\n                style: {\n                  width: '45%'\n                },\n                children: (0, _jsxRuntime.jsx)(_component.Text.Small, {\n                  children: \"PRODUCTO\"\n                })\n              }), (0, _jsxRuntime.jsx)(_component.Container, {\n                style: {\n                  width: '20%'\n                },\n                children: (0, _jsxRuntime.jsx)(_component.Text.Small, {\n                  children: \"PRECIO\"\n                })\n              }), (0, _jsxRuntime.jsx)(_component.Container, {\n                style: {\n                  width: '20%'\n                },\n                children: (0, _jsxRuntime.jsx)(_component.Text.Small, {\n                  children: \"SUBTOTAL\"\n                })\n              })]\n            }), !cartItems.length && (0, _jsxRuntime.jsxs)(_component.Container, {\n              children: [(0, _jsxRuntime.jsx)(_component.Spacer.Medium, {}), (0, _jsxRuntime.jsx)(_component.Text.BodyBold, {\n                children: \"Comience a escanear...\"\n              })]\n            })]\n          }),\n          renderItem: function renderItem(_ref) {\n            var item = _ref.item;\n            return (0, _jsxRuntime.jsxs)(_component.Container, {\n              row: true,\n              spaceBetween: true,\n              children: [(0, _jsxRuntime.jsx)(_component.Container, {\n                style: {\n                  width: '15%'\n                },\n                alignCenter: true,\n                children: (0, _jsxRuntime.jsx)(_component.Text.TitleH2, {\n                  children: item.quantity\n                })\n              }), (0, _jsxRuntime.jsx)(_component.Container, {\n                style: {\n                  width: '45%'\n                },\n                children: (0, _jsxRuntime.jsx)(_component.Text.TitleH2, {\n                  children: item.description\n                })\n              }), (0, _jsxRuntime.jsx)(_component.Container, {\n                style: {\n                  width: '20%'\n                },\n                children: (0, _jsxRuntime.jsx)(_component.Container, {\n                  row: true,\n                  alignCenter: true,\n                  children: (0, _jsxRuntime.jsxs)(_component.Text.TitleH2, {\n                    children: [item.price, \" ARS\"]\n                  })\n                })\n              }), (0, _jsxRuntime.jsx)(_component.Container, {\n                style: {\n                  width: '20%'\n                },\n                children: (0, _jsxRuntime.jsx)(_component.Container, {\n                  row: true,\n                  alignCenter: true,\n                  children: (0, _jsxRuntime.jsxs)(_component.Text.TitleH2, {\n                    children: [item.price * item.quantity, \" ARS\"]\n                  })\n                })\n              })]\n            });\n          }\n        })\n      })\n    }), (0, _jsxRuntime.jsxs)(_component.Container, {\n      row: true,\n      alignEnd: true,\n      spaceBetween: true,\n      padded: true,\n      children: [(0, _jsxRuntime.jsxs)(_component.Container, {\n        children: [(0, _jsxRuntime.jsx)(_component.Text.Small, {\n          children: \"TOTAL\"\n        }), (0, _jsxRuntime.jsxs)(_component.Text.TitleH2, {\n          children: [calculateTotal(), \" ARS\"]\n        })]\n      }), (0, _jsxRuntime.jsx)(_component.Container, {\n        onPress: handleFinish,\n        children: (0, _jsxRuntime.jsx)(_component.Button.Primary, {\n          title: \"COBRAR\",\n          width: 128\n        })\n      })]\n    })]\n  });\n};\n\nvar _default = PDV;\nexports.default = _default;","map":{"version":3,"sources":["/Users/estebanjoaquin/src/examples/with-electron/views/PDV/index.js"],"names":["inventoryMock","id","productId","barcode","description","price","PDV","cartItems","setCartItems","React","scanned","setScanned","useHeaderTitle","useBackButton","useScanner","useCallback","item","alert","scannedAt","Date","updateCart","existingItem","scannedProduct","quantity","calculateTotal","carry","value","handleDelete","cartItem","handleFinish","width"],"mappings":"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","sourcesContent":["import React, { useCallback } from 'react';\nimport { FlatList } from 'react-native'\nimport { Button, Container, Text, Spacer } from '../../component'\nimport styles from './styles'\nimport { dialog } from 'electron'\nimport { useBackButton, useScanner, useHeaderTitle } from '../../hook'\n\nconst inventoryMock = [{\n    id: 1,\n    productId: 4,\n    barcode: '111',\n    description: 'CEPILLO',\n    price: 20,\n}, {\n    id: 2,\n    productId: 5,\n    barcode: '222',\n    description: 'JABON',\n    price: 40,\n}]\n\nconst PDV = () => {\n    const [cartItems, setCartItems] = React.useState([])\n    const [scanned, setScanned] = React.useState(null)\n\n    useHeaderTitle(\"Punto de venta\")\n    useBackButton()\n    useScanner(useCallback((barcode) => {\n        const item = inventoryMock.find(item => (\n            item.barcode === barcode\n        ))\n        if (!item) {\n            alert(barcode + ' no encontrado')\n        }\n        else {\n            setScanned({\n                ...item,\n                scannedAt: Date.now(),\n            })\n        }\n    }, [setScanned]))\n\n    React.useEffect(() => {\n        if (!scanned) {\n            return\n        }\n        updateCart(scanned)\n    }, [scanned])\n\n    const updateCart = (scannedProduct) => {\n        const existingItem = cartItems.find(item => (\n            item.productId === scannedProduct.productId\n        ))\n\n        if (existingItem) {\n\n            setCartItems(cartItems.map(item => (\n                item.productId === scannedProduct.productId ?\n                    { ...item, quantity: item.quantity + 1 } : item\n            )))\n        }\n        else {\n            setCartItems([\n                ...cartItems,\n                {\n                    id: cartItems.length + 1,\n                    quantity: 1,\n                    ...scannedProduct,\n                }\n            ])\n        }\n    }\n\n    const calculateTotal = () => {\n        return cartItems.reduce((carry, value) => {\n            return carry + (value.price * value.quantity)\n        }, 0)\n    }\n\n    const handleDelete = (item) => () => {\n        if (item.quantity === 1) {\n            setCartItems(cartItems.filter(cartItem => (\n                cartItem.productId !== item.productId\n            )))\n            return\n        }\n\n        setCartItems(\n            cartItems.map(cartItem => (\n                cartItem.productId === item.productId ?\n                    { ...cartItem, quantity: cartItem.quantity - 1 } : cartItem\n            ))\n        )\n    }\n\n    const handleFinish = () => {\n        setCartItems([])\n\n    }\n\n    return (\n        <Container flex spaceBetween>\n            <Container row spaceBetween padded>\n                <Container fullWidth>\n                    <FlatList\n                        keyExtractor={(item) => item.id}\n                        data={cartItems}\n                        ListHeaderComponent={\n                            <Container>\n                                <Container row spaceBetween>\n                                    <Container style={{\n                                        width: '15%',\n                                    }}>\n                                        <Text.Small>CANTIDAD</Text.Small>\n                                    </Container>\n                                    <Container style={{\n                                        width: '45%',\n                                    }}>\n                                        <Text.Small>PRODUCTO</Text.Small>\n                                    </Container>\n                                    <Container style={{\n                                        width: '20%',\n                                    }}>\n                                        <Text.Small>PRECIO</Text.Small>\n                                    </Container>\n                                    <Container style={{\n                                        width: '20%'\n                                    }}>\n                                        <Text.Small>SUBTOTAL</Text.Small>\n                                    </Container>\n                                </Container>\n                                {!cartItems.length &&\n                                    <Container>\n                                        <Spacer.Medium />\n                                        <Text.BodyBold>Comience a escanear...</Text.BodyBold>\n                                    </Container>}\n                            </Container>\n                        }\n                        renderItem={({ item }) => (\n                            <Container row spaceBetween>\n                                <Container style={{\n                                    width: '15%',\n                                }} alignCenter>\n                                    <Text.TitleH2>{item.quantity}</Text.TitleH2>\n                                </Container>\n                                <Container style={{\n                                    width: '45%',\n                                }}>\n                                    <Text.TitleH2>\n                                        {item.description}\n                                    </Text.TitleH2>\n                                </Container>\n                                <Container style={{\n                                    width: '20%'\n                                }}>\n                                    <Container row alignCenter>\n                                        <Text.TitleH2>\n                                            {item.price} ARS\n                                        </Text.TitleH2>\n                                    </Container>\n                                </Container>\n                                <Container style={{\n                                    width: '20%'\n                                }}>\n                                    <Container row alignCenter>\n                                        <Text.TitleH2>\n                                            {item.price * item.quantity} ARS\n                                    </Text.TitleH2>\n\n                                    </Container>\n                                </Container>\n                            </Container>\n                        )}\n                    />\n                </Container>\n            </Container>\n            <Container row alignEnd spaceBetween padded>\n                <Container>\n                    <Text.Small>TOTAL</Text.Small>\n                    <Text.TitleH2>{calculateTotal()} ARS</Text.TitleH2>\n                </Container>\n                <Container onPress={handleFinish}>\n                    <Button.Primary title=\"COBRAR\" width={128}/>\n                </Container>\n            </Container>\n        </Container>\n    );\n}\n\nexport default PDV\n"]},"metadata":{},"sourceType":"script"}