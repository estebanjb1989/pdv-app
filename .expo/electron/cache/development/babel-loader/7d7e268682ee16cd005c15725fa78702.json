{"ast":null,"code":"var _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _expoAuthSession = require(\"expo-auth-session\");\n\nvar Facebook = _interopRequireWildcard(require(\"expo-auth-session/providers/facebook\"));\n\nvar _config = _interopRequireDefault(require(\"constants/config\"));\n\nvar _store = _interopRequireDefault(require(\"services/store\"));\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nvar useFacebook = function useFacebook() {\n  var _useStore = (0, _store.default)(function (state) {\n    return [state.usuario, state.setUsuario];\n  }),\n      _useStore2 = (0, _slicedToArray2.default)(_useStore, 2),\n      usuario = _useStore2[0],\n      setUsuario = _useStore2[1];\n\n  var _Facebook$useAuthRequ = Facebook.useAuthRequest({\n    clientId: _config.default.FacebookId,\n    responseType: _expoAuthSession.ResponseType.Token\n  }),\n      _Facebook$useAuthRequ2 = (0, _slicedToArray2.default)(_Facebook$useAuthRequ, 3),\n      request = _Facebook$useAuthRequ2[0],\n      response = _Facebook$useAuthRequ2[1],\n      promptAsync = _Facebook$useAuthRequ2[2];\n\n  if (request) {\n    console.log(\"You need to add this url to your authorized redirect urls on your Facebook app: \" + request.redirectUri);\n  }\n\n  (0, _react.useEffect)(function () {\n    if (response && response.type === \"success\" && response.authentication) {\n      (function _callee() {\n        var userInfoResponse, userInfo;\n        return _regenerator.default.async(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return _regenerator.default.awrap(fetch(\"https://graph.facebook.com/me?access_token=\" + response.authentication.accessToken + \"&fields=id,name,picture.type(large)\"));\n\n              case 2:\n                userInfoResponse = _context.sent;\n                _context.next = 5;\n                return _regenerator.default.awrap(userInfoResponse.json());\n\n              case 5:\n                userInfo = _context.sent;\n                setUsuario(userInfo);\n\n              case 7:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, null, null, null, Promise);\n      })();\n    }\n  }, [response]);\n  return {\n    usuario: usuario,\n    promptAsync: promptAsync\n  };\n};\n\nvar _default = useFacebook;\nexports.default = _default;","map":{"version":3,"sources":["/Users/estebanjoaquin/src/examples/with-electron/hook/useFacebook.js"],"names":["useFacebook","usuario","setUsuario","useStore","state","request","response","promptAsync","Facebook","clientId","Config","responseType","ResponseType","console","useEffect","userInfoResponse","fetch","userInfo"],"mappings":";;;;;;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;;;;;AAEA,IAAMA,WAAW,GAAXA,SAAAA,WAAAA,GAAoB;AACtB,MAAA,SAAA,GAA8BG,oBAAS,UAAA,KAAA,EAAK;AAAA,WAAI,CAACC,KAAK,CAAN,OAAA,EAAgBA,KAAK,CAAzB,UAAI,CAAJ;AAA5C,GAA8BD,CAA9B;AAAA,MAAA,UAAA,GAAA,6BAAA,SAAA,EAAA,CAAA,CAAA;AAAA,MAAOF,OAAP,GAAA,UAAA,CAAA,CAAA,CAAA;AAAA,MAAgBC,UAAhB,GAAA,UAAA,CAAA,CAAA,CAAA;;AAGA,MAAA,qBAAA,GAAyCM,QAAQ,CAARA,cAAAA,CAAwB;AAC7DC,IAAAA,QAAQ,EAAEC,gBADmD,UAAA;AAS7DC,IAAAA,YAAY,EAAEC,8BATlB;AAAiE,GAAxBJ,CAAzC;AAAA,MAAA,sBAAA,GAAA,6BAAA,qBAAA,EAAA,CAAA,CAAA;AAAA,MAAOH,OAAP,GAAA,sBAAA,CAAA,CAAA,CAAA;AAAA,MAAgBC,QAAhB,GAAA,sBAAA,CAAA,CAAA,CAAA;AAAA,MAA0BC,WAA1B,GAAA,sBAAA,CAAA,CAAA,CAAA;;AAYA,MAAA,OAAA,EAAa;AACTM,IAAAA,OAAO,CAAPA,GAAAA,CACI,qFACAR,OAAO,CAFXQ,WAAAA;AAMJC;;AAAAA,wBAAU,YAAM;AACZ,QAAIR,QAAQ,IAAIA,QAAQ,CAARA,IAAAA,KAAZA,SAAAA,IAA2CA,QAAQ,CAAvD,cAAA,EAAwE;AACpE,OAAC,SAAA,OAAA,GAAA;AAAA,YAAA,gBAAA,EAAA,QAAA;AAAA,eAAA,qBAAA,KAAA,CAAA,SAAA,QAAA,CAAA,QAAA,EAAA;AAAA,iBAAA,CAAA,EAAA;AAAA,oBAAA,QAAA,CAAA,IAAA,GAAA,QAAA,CAAA,IAAA;AAAA,mBAAA,CAAA;AAAA,gBAAA,QAAA,CAAA,IAAA,GAAA,CAAA;AAAA,uBAAA,qBAAA,KAAA,CACkCU,KAAK,CAAA,gDACcV,QAAQ,CAARA,cAAAA,CADd,WAAA,GADvC,qCACuC,CADvC,CAAA;;AAAA,mBAAA,CAAA;AACSS,gBAAAA,gBADT,GAAA,QAAA,CAAA,IACSA;AADT,gBAAA,QAAA,CAAA,IAAA,GAAA,CAAA;AAAA,uBAAA,qBAAA,KAAA,CAI0BA,gBAAgB,CAJ1C,IAI0BA,EAJ1B,CAAA;;AAAA,mBAAA,CAAA;AAISE,gBAAAA,QAJT,GAAA,QAAA,CAAA,IAISA;AACNf,gBAAAA,UAAU,CAAVA,QAAU,CAAVA;;AALH,mBAAA,CAAA;AAAA,mBAAA,KAAA;AAAA,uBAAA,QAAA,CAAA,IAAA,EAAA;AAAA;AAAA;AAAA,SAAA,EAAA,IAAA,EAAA,IAAA,EAAA,IAAA,EAAA,OAAA,CAAA;AAAD,OAAA;AAQP;AAVQ,GAATY,EAUG,CAVHA,QAUG,CAVHA;AAYA,SAAO;AACHb,IAAAA,OAAO,EADJ,OAAA;AAEHM,IAAAA,WAAW,EAFf;AAAO,GAAP;AAnCJ,CAAA;;eAyCA,W","sourcesContent":["import React, { useEffect } from 'react'\nimport { ResponseType } from \"expo-auth-session\";\nimport * as Facebook from \"expo-auth-session/providers/facebook\";\nimport Config from 'constants/config'\nimport useStore from 'services/store'\n\nconst useFacebook = () => {\n    const [usuario, setUsuario] = useStore(state => [state.usuario, state.setUsuario])\n\n    // Request\n    const [request, response, promptAsync] = Facebook.useAuthRequest({\n        clientId: Config.FacebookId,\n        // NOTICE: Please do not actually request the token on the client (see:\n        // response_type=token in the authUrl), it is not secure. Request a code\n        // instead, and use this flow:\n        // https://developers.facebook.com/docs/facebook-login/manually-build-a-login-flow/#confirm\n        // The code here is simplified for the sake of demonstration. If you are\n        // just prototyping then you don't need to concern yourself with this and\n        // can copy this example, but be aware that this is not safe in production.\n        responseType: ResponseType.Token,\n    });\n\n    if (request) {\n        console.log(\n            \"You need to add this url to your authorized redirect urls on your Facebook app: \" +\n            request.redirectUri\n        );\n    }\n\n    useEffect(() => {\n        if (response && response.type === \"success\" && response.authentication) {\n            (async () => {\n                const userInfoResponse = await fetch(\n                    `https://graph.facebook.com/me?access_token=${response.authentication.accessToken}&fields=id,name,picture.type(large)`\n                );\n                const userInfo = await userInfoResponse.json();\n                setUsuario(userInfo);\n            })();\n        }\n    }, [response]);\n\n    return {\n        usuario,\n        promptAsync,\n    }\n}\n\nexport default useFacebook"]},"metadata":{},"sourceType":"script"}