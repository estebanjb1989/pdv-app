{"ast":null,"code":"var _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _reactRedux = require(\"react-redux\");\n\nvar _component = require(\"../../component\");\n\nvar _hook = require(\"../../hook\");\n\nvar DocumentPicker = _interopRequireWildcard(require(\"expo-document-picker\"));\n\nvar XLSX = _interopRequireWildcard(require(\"xlsx\"));\n\nvar _jsxRuntime = require(\"react/jsx-runtime\");\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nvar Adjustments = function Adjustments() {\n  var _useState = (0, _react.useState)(false),\n      _useState2 = (0, _slicedToArray2.default)(_useState, 2),\n      loadingExcel = _useState2[0],\n      setLoadingExcel = _useState2[1];\n\n  (0, _hook.useBackButton)();\n  var dispatch = (0, _reactRedux.useDispatch)();\n  return (0, _jsxRuntime.jsxs)(_component.Container, {\n    alignCenter: true,\n    children: [(0, _jsxRuntime.jsx)(_component.Spacer.Medium, {}), (0, _jsxRuntime.jsx)(_component.Container, {\n      style: {\n        width: 240,\n        height: 44\n      },\n      children: (0, _jsxRuntime.jsx)(_component.Button.Primary, {\n        disabled: loadingExcel,\n        onPress: function _callee() {\n          var f, reader;\n          return _regenerator.default.async(function _callee$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  _context.next = 2;\n                  return _regenerator.default.awrap(DocumentPicker.getDocumentAsync({\n                    type: 'xls'\n                  }));\n\n                case 2:\n                  f = _context.sent;\n                  reader = new FileReader();\n\n                  reader.onload = function (evt) {\n                    var bstr = evt.target.result;\n                    var wb = XLSX.read(bstr, {\n                      type: 'binary'\n                    });\n                    var wsname = wb.SheetNames[0];\n                    var ws = wb.Sheets[wsname];\n                    var data = XLSX.utils.sheet_to_json(ws, {\n                      header: 1\n                    });\n                    var headers = data[0];\n                    var rows = data.slice(1).map(function (item) {\n                      var _ref;\n\n                      return _ref = {}, (0, _defineProperty2.default)(_ref, headers[0], item[0]), (0, _defineProperty2.default)(_ref, headers[1], item[1]), (0, _defineProperty2.default)(_ref, headers[2], item[2]), (0, _defineProperty2.default)(_ref, headers[3], item[3]), _ref;\n                    });\n                    dispatch(setInventory(rows));\n                    setLoadingExcel(false);\n                  };\n\n                  reader.onerror = function (evt) {\n                    setLoadingExcel(false);\n                  };\n\n                  setLoadingExcel(true);\n                  reader.readAsBinaryString(f.output[0]);\n\n                case 8:\n                case \"end\":\n                  return _context.stop();\n              }\n            }\n          }, null, null, null, Promise);\n        },\n        title: \"Importar Productos\"\n      })\n    })]\n  });\n};\n\nvar _default = Adjustments;\nexports.default = _default;","map":{"version":3,"sources":["/Users/estebanjoaquin/src/examples/pdv-app/views/Adjustments/index.js"],"names":["Adjustments","loadingExcel","setLoadingExcel","useState","useBackButton","dispatch","width","height","f","DocumentPicker","type","reader","bstr","evt","wb","XLSX","wsname","ws","data","header","headers","rows","item","setInventory"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport { useDispatch } from 'react-redux'\nimport { Container, Button, Spacer } from '../../component'\nimport { useBackButton } from '../../hook'\nimport * as DocumentPicker from 'expo-document-picker'\nimport * as XLSX from 'xlsx';\n\nconst Adjustments = () => {\n    const [loadingExcel, setLoadingExcel] = useState(false)\n    useBackButton()\n    const dispatch = useDispatch()\n\n    return (\n        <Container alignCenter>\n            <Spacer.Medium />\n            <Container style={{\n                width: 240,\n                height: 44\n            }}>\n                <Button.Primary\n                    disabled={loadingExcel}\n                    onPress={async () => {\n                        const f = await DocumentPicker.getDocumentAsync({\n                            type: 'xls'\n                        })\n\n                        const reader = new FileReader();\n                        reader.onload = (evt) => { // evt = on_file_select event\n                            /* Parse data */\n                            const bstr = evt.target.result;\n                            const wb = XLSX.read(bstr, {type:'binary'});\n                            /* Get first worksheet */\n                            const wsname = wb.SheetNames[0];\n                            const ws = wb.Sheets[wsname];\n                            /* Convert array of arrays */\n                            const data = XLSX.utils.sheet_to_json(ws, {header:1});\n                            /* Update state */\n                            const headers = data[0]\n                            const rows = data.slice(1).map(item => ({\n                                [headers[0]]: item[0],\n                                [headers[1]]: item[1],\n                                [headers[2]]: item[2],\n                                [headers[3]]: item[3],\n                            }))\n                            dispatch(setInventory(rows))\n                            setLoadingExcel(false)\n                        };\n                        reader.onerror = (evt) => {\n                            setLoadingExcel(false)\n                        }\n                        setLoadingExcel(true)\n                        reader.readAsBinaryString(f.output[0]);\n                    }}\n                    title=\"Importar Productos\"\n                />\n            </Container>\n        </Container>\n    );\n}\n\nexport default Adjustments"]},"metadata":{},"sourceType":"script"}